<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="base-script.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        // google.charts.setOnLoadCallback(drawChart);

        function drawChart(raw_data, title) {
            var data = google.visualization.arrayToDataTable( raw_data );

            var options = {
                title: title,
//                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }
    </script>
    <script type="text/javascript" src="libstats-script.js"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div style="float:right;margin-right:20px;">
    <div><a href="https://webstats.ucar.edu/">CISL AWstats index</a></div>
    <div><a href="opensky_downloads.html">OpenSky downloads</a></div>
</div>
<h1>Web Statistics - Access</h1>
<div id="curve_chart" ></div>

<!--
<button id="sample-button" type="button">Click Me</button>
-->

<div id="field-wrapper" >
    <h2>Field</h2>
    <fieldset id="field-selector">
        <legend>Select Field: </legend>
    </fieldset>
</div>

<div id="year-wrapper">
<h2>Year</h2>
<fieldset id="year-selector">
    <legend>Select a Year: </legend>
</fieldset>
</div>



<h2>Hosts</h2>
<fieldset id="host-selector">
    <legend>Select Hosts: </legend>
</fieldset>




</body>
<script>

    var FIELD_NAMES = [
        'Unique visitors',
        'Number of visits',
        'Pages',
        'Hits',
        'Bandwidth'
    ];

    var HOSTS = [
        "aspace.archives.ucar.edu",
        "library.ucar.edu",
        "nldr.library.ucar.edu",
        "opensky.ucar.edu",
        "osws.ucar.edu",
        "uc.dls.ucar.edu",
        "ucarconnect.ucar.edu",
        "www.archives.ucar.edu",
        "www.dlese.org",
        "www.opensky.library.ucar.edu",
    ]

    $(function () {

        log (PARAMS)

        $('#sample-button')
                .button()
                .click (function (event) {

                    log ('selected year: ' + get_selected_year());
                    log ('selected field: ' + get_selected_field());
                    log ('selected hosts: ' + get_selected_hosts());

                });

        initializeYearSelector();
        initializeFieldSelector();
        initializeHostSelector();

        setTimeout(function () {
            updateChart();
        }, 500);

    })


</script>
</html>